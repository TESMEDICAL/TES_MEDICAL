@page "/KhachHang"

@using TES_MEDICAL.ADMIN.Client.Components
@attribute [Authorize]



<div class="m-3">


    <div>
        <div class="d-flex flex-wrap m-2">
            <input class="mr-2 mb-2 form-control-sm" @bind="@searchName" placeholder="Tìm theo Tên khách" />
            <input class="mr-2 mb-2 form-control-sm" @bind="@searchPhone" placeholder="Tìm theo số điện thoại" />

            <div class="col-4">

                <button type="button" class="btn btn-success btn-sm mr-2 " @onclick="Timkiem" id="btSeach"><i class="fa fa-search" aria-hidden="true"></i>&nbsp;Lọc</button>

                
                <button type="button" class="btn btn-success mr-2 btn-sm" id="btSeach" @onclick="Clear"><i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;Làm mới</button>
                @*@if (loading)
                    {
            <span class="spinner-border spinner-border-sm mr-1"></span>}*@
            </div>
          

        </div>



    </div>





</div>
<div id="nameListContainer">
    @if (!Nocontent && !loading)
    {
<div style="min-height:400px">
    <table class="table table table-striped table-bordered text-left w-100 " style="font-size:small">
        <thead class="bg-success">
            <tr>
                <th>
                    Tên khách
                </th>
                <th>
                    Số điện thoại
                </th>
                <th>
                    Email
                </th>
                <th>
                    Ngày sinh
                </th>
                <th>
                    Địa chỉ
                </th>


                <th>ACTION</th>
            </tr>
        </thead>
        <tbody class="tbody">
            @foreach (var item in KhachHangs)
            {
            <tr>
                <td>@item.Name</td>
                <td>@item.Phone</td>

                <td>@item.Email</td>
                <td>@item.NgaySinh.ToString("dd/MM/yyyy")</td>
                <td>@item.DiaChi</td>

                <td> <a class="btn btn-dark btn-sm active" @onclick="()=>GetDetail(item.Id)" title="Thông tin khách hàng"> <i class="fa fa-info-circle" aria-hidden="true"></i></a></td>


            </tr>
}
        </tbody>
    </table>
</div>
                <div class="row">
                    <div class="col">
                        <Pagination MetaData="MetaData" Spread="2" SelectedPage="SelectedPage" />
                    </div>
                </div>}
            else
            {
                if (Nocontent && !loading)
                {
<span>Không có kết quả</span> }
else
{
<div class="spinner-border spinner-border-sm"></div><span>Đang lấy dữ liệu</span>}


}

</div>


<div class="modal fade" id="KhachHangDetail" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content" style="width:900px">
            <div class="modal-header">

                <div class="col-6">
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" style="float:right">
                        Thông tin khách hàng
                    </h4>
                </div>

            </div>
            @if (kh!=null)
            {

        <div class="modal-body">
            <h4>KhachHang</h4>
            <hr />
            <dl class="row">
                <dt class="col-sm-2">
                   Họ tên:
                </dt>
                <dd class="col-sm-10">
                    @kh.Name
                </dd>
                <dt class="col-sm-2">
                    Email:
                </dt>
                <dd class="col-sm-10">
                   @kh.Email
                </dd>
                <dt class="col-sm-2">
                    Điện thoại
                </dt>
                <dd class="col-sm-10">
                    @kh.Phone
                </dd>
                <dt class="col-sm-2">
                    Ngày sinh
                </dt>
                <dd class="col-sm-10">
                    @kh.NgaySinh
                </dd>
                <dt class="col-sm-2">
                    Địa chỉ
                </dt>
                <dd class="col-sm-10">
                    @kh.DiaChi
                </dd>
               


            </dl>
            
        </div>

                <div class="modal-footer">
                    <div class="text-right">
                        <button type="button" class="btn btn-danger btn-sm" id="btclose" data-bs-dismiss="modal"><i class="fa fa-close"></i>&nbsp;Đóng</button>
                    </div>

                </div>}


        </div>
    </div>
</div>




